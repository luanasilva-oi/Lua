<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<title data-i18n="ageTitle">Aviso</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link rel="stylesheet" href="css/style.css">
<script>
    function getQueryParam(param) {
        const params = new URLSearchParams(window.location.search);
        return params.get(param);
    }
</script>
</head>
<body class="dark age-bg">

<!-- Container para o seletor de idiomas -->
<div id="language-switcher-container"></div>

<div class="age-container">
    <div class="age-box">
        <h1 data-i18n="ageTitle">Aviso</h1>
        <p class="age-text" data-i18n-html="ageText">ConteÃºdo destinado exclusivamente a maiores de 18 anos.<br>Ao prosseguir, vocÃª confirma que atende a esse requisito.</p>
        <button class="age-btn" onclick="acceptAge()" data-i18n="ageButton">CONFIRMAR IDADE</button>
        <span class="age-note" data-i18n="ageNote">Acesso permitido somente para maiores de 18 anos.</span>
    </div>
</div>

<script>
// Carregar seletor de idiomas
document.addEventListener('DOMContentLoaded', function() {
    const languageSwitcherContainer = document.getElementById('language-switcher-container');
    if (languageSwitcherContainer) {
        // Criar seletor de idiomas dinamicamente
        const languageSwitcherHTML = `
            <div class="language-switcher">
                <div class="language-selector" id="language-selector">
                    <div class="current-language">
                        <div class="flag">
                            <span>ðŸ‡§ðŸ‡·</span>
                        </div>
                        <span>PT</span>
                        <span class="arrow">â–¼</span>
                    </div>
                    <div class="language-dropdown">
                        <a href="#" class="language-option active" data-lang="pt">
                            <div class="flag">
                                <span>ðŸ‡§ðŸ‡·</span>
                            </div>
                            <span>PortuguÃªs</span>
                        </a>
                        <a href="#" class="language-option" data-lang="en">
                            <div class="flag">
                                <span>ðŸ‡ºðŸ‡¸</span>
                            </div>
                            <span>English</span>
                        </a>
                        <a href="#" class="language-option" data-lang="es">
                            <div class="flag">
                                <span>ðŸ‡ªðŸ‡¸</span>
                            </div>
                            <span>EspaÃ±ol</span>
                        </a>
                    </div>
                </div>
            </div>
        `;
        
        languageSwitcherContainer.innerHTML = languageSwitcherHTML;
        
        // Configurar eventos do seletor
        const languageSelector = document.getElementById('language-selector');
        const languageOptions = document.querySelectorAll('.language-option');
        
        if (languageSelector) {
            // Abrir/fechar dropdown
            languageSelector.addEventListener('click', function(e) {
                e.stopPropagation();
                this.classList.toggle('open');
            });
            
            // Fechar dropdown ao clicar fora
            document.addEventListener('click', function() {
                languageSelector.classList.remove('open');
            });
            
            // Mudar idioma
            languageOptions.forEach(option => {
                option.addEventListener('click', async function(e) {
                    e.preventDefault();
                    
                    const lang = this.getAttribute('data-lang');
                    
                    // Remover classe active de todas as opÃ§Ãµes
                    languageOptions.forEach(opt => opt.classList.remove('active'));
                    
                    // Adicionar classe active Ã  opÃ§Ã£o selecionada
                    this.classList.add('active');
                    
                    // Mudar bandeira e texto
                    const currentFlag = document.querySelector('.current-language .flag span');
                    const currentText = document.querySelector('.current-language span:not(.arrow)');
                    
                    const flags = {'pt': 'ðŸ‡§ðŸ‡·', 'en': 'ðŸ‡ºðŸ‡¸', 'es': 'ðŸ‡ªðŸ‡¸'};
                    const names = {'pt': 'PT', 'en': 'EN', 'es': 'ES'};
                    
                    if (currentFlag) currentFlag.textContent = flags[lang] || 'ðŸ‡§ðŸ‡·';
                    if (currentText) currentText.textContent = names[lang] || 'PT';
                    
                    // Salvar preferÃªncia
                    localStorage.setItem('selectedLanguage', lang);
                    
                    // Fechar dropdown
                    languageSelector.classList.remove('open');
                    
                    // Recarregar a pÃ¡gina para aplicar o idioma
                    setTimeout(() => {
                        window.location.reload();
                    }, 300);
                });
            });
        }
    }
});

function acceptAge(){
    localStorage.setItem('age_ok','1');
    
    const destination = getQueryParam('go');

    if (destination === 'meta') {
        window.location.href = "acesso.html";
    } else {
        window.location.href = "bio.html";
    }
}
</script>

<!-- Incluir gerenciador de idiomas -->
<script src="js/lang.js"></script>
</body>
</html>
